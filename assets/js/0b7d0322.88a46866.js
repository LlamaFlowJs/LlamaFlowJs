"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[703],{19206:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>c});var s=r(65723),a=r(43327);const t={},o="Jina AI Reranker",i={id:"modules/node_postprocessors/jinaai_reranker",title:"Jina AI Reranker",description:"The Jina AI Reranker is a postprocessor that uses the Jina AI Reranker API to rerank the results of a search query.",source:"@site/docs/modules/node_postprocessors/jinaai_reranker.md",sourceDirName:"modules/node_postprocessors",slug:"/modules/node_postprocessors/jinaai_reranker",permalink:"/LlamaFlowJs/modules/node_postprocessors/jinaai_reranker",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"Cohere Reranker",permalink:"/LlamaFlowJs/modules/node_postprocessors/cohere_reranker"},next:{title:"MixedbreadAI",permalink:"/LlamaFlowJs/modules/node_postprocessors/mixedbreadiai_reranker"}},l={},c=[{value:"Setup",id:"setup",level:2},{value:"Load and index documents",id:"load-and-index-documents",level:2},{value:"Increase similarity topK to retrieve more results",id:"increase-similarity-topk-to-retrieve-more-results",level:2},{value:"Create a new instance of the JinaAIReranker class",id:"create-a-new-instance-of-the-jinaaireranker-class",level:2},{value:"Create a query engine with the retriever and node postprocessor",id:"create-a-query-engine-with-the-retriever-and-node-postprocessor",level:2},{value:"API Reference",id:"api-reference",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"jina-ai-reranker",children:"Jina AI Reranker"}),"\n",(0,s.jsx)(n.p,{children:"The Jina AI Reranker is a postprocessor that uses the Jina AI Reranker API to rerank the results of a search query."}),"\n",(0,s.jsx)(n.h2,{id:"setup",children:"Setup"}),"\n",(0,s.jsxs)(n.p,{children:["Firstly, you will need to install the ",(0,s.jsx)(n.code,{children:"llamaflowjs"})," package."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pnpm install llamaflowjs\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Now, you will need to sign up for an API key at ",(0,s.jsx)(n.a,{href:"https://jina.ai/reranker",children:"Jina AI"}),". Once you have your API key you can import the necessary modules and create a new instance of the ",(0,s.jsx)(n.code,{children:"JinaAIReranker"})," class."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'import {\n  JinaAIReranker,\n  Document,\n  OpenAI,\n  VectorStoreIndex,\n  Settings,\n} from "llamaflowjs";\n'})}),"\n",(0,s.jsx)(n.h2,{id:"load-and-index-documents",children:"Load and index documents"}),"\n",(0,s.jsx)(n.p,{children:"For this example, we will use a single document. In a real-world scenario, you would have multiple documents to index."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'const document = new Document({ text: essay, id_: "essay" });\n\nSettings.llm = new OpenAI({ model: "gpt-3.5-turbo", temperature: 0.1 });\n\nconst index = await VectorStoreIndex.fromDocuments([document]);\n'})}),"\n",(0,s.jsx)(n.h2,{id:"increase-similarity-topk-to-retrieve-more-results",children:"Increase similarity topK to retrieve more results"}),"\n",(0,s.jsxs)(n.p,{children:["The default value for ",(0,s.jsx)(n.code,{children:"similarityTopK"})," is 2. This means that only the most similar document will be returned. To retrieve more results, you can increase the value of ",(0,s.jsx)(n.code,{children:"similarityTopK"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const retriever = index.asRetriever();\nretriever.similarityTopK = 5;\n"})}),"\n",(0,s.jsx)(n.h2,{id:"create-a-new-instance-of-the-jinaaireranker-class",children:"Create a new instance of the JinaAIReranker class"}),"\n",(0,s.jsxs)(n.p,{children:["Then you can create a new instance of the ",(0,s.jsx)(n.code,{children:"JinaAIReranker"})," class and pass in the number of results you want to return.\nThe Jina AI Reranker API key is set in the ",(0,s.jsx)(n.code,{children:"JINAAI_API_KEY"})," environment variable."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"export JINAAI_API_KEY=<YOUR API KEY>\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const nodePostprocessor = new JinaAIReranker({\n  topN: 5,\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"create-a-query-engine-with-the-retriever-and-node-postprocessor",children:"Create a query engine with the retriever and node postprocessor"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:'const queryEngine = index.asQueryEngine({\n  retriever,\n  nodePostprocessors: [nodePostprocessor],\n});\n\n// log the response\nconst response = await queryEngine.query("Where did the author grown up?");\n'})}),"\n",(0,s.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/LlamaFlowJs/api/classes/JinaAIReranker",children:"JinaAIReranker"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},43327:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>i});var s=r(22155);const a={},t=s.createContext(a);function o(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);