"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9318],{22644:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>u,frontMatter:()=>t,metadata:()=>d,toc:()=>l});var a=r(65723),s=r(43327);const t={},i="MixedbreadAI",d={id:"modules/node_postprocessors/mixedbreadiai_reranker",title:"MixedbreadAI",description:"Welcome to the mixedbread ai reranker guide! This guide will help you use mixedbread ai's API to rerank search query results, ensuring you get the most relevant information, just like picking the freshest bread from the bakery.",source:"@site/docs/modules/node_postprocessors/mixedbreadiai_reranker.md",sourceDirName:"modules/node_postprocessors",slug:"/modules/node_postprocessors/mixedbreadiai_reranker",permalink:"/modules/node_postprocessors/mixedbreadiai_reranker",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"Jina AI Reranker",permalink:"/modules/node_postprocessors/jinaai_reranker"},next:{title:"ChatEngine",permalink:"/modules/chat_engine"}},o={},l=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Setup",id:"setup",level:2},{value:"Usage with llamaflowjs",id:"usage-with-llamaflowjs",level:2},{value:"Step 1: Load and Index Documents",id:"step-1-load-and-index-documents",level:3},{value:"Step 2: Increase Similarity TopK",id:"step-2-increase-similarity-topk",level:3},{value:"Step 3: Create a MixedbreadAIReranker Instance",id:"step-3-create-a-mixedbreadaireranker-instance",level:3},{value:"Step 4: Create a Query Engine",id:"step-4-create-a-query-engine",level:3},{value:"Simple Reranking Guide",id:"simple-reranking-guide",level:2},{value:"Step 1: Create an Instance of MixedbreadAIReranker",id:"step-1-create-an-instance-of-mixedbreadaireranker",level:3},{value:"Step 2: Define Nodes and Query",id:"step-2-define-nodes-and-query",level:3},{value:"Step 3: Perform Reranking",id:"step-3-perform-reranking",level:3},{value:"Reranking with Objects",id:"reranking-with-objects",level:2},{value:"Step 1: Create an Instance of MixedbreadAIReranker",id:"step-1-create-an-instance-of-mixedbreadaireranker-1",level:3},{value:"Step 2: Define Documents and Query",id:"step-2-define-documents-and-query",level:3},{value:"Step 3: Perform Reranking",id:"step-3-perform-reranking-1",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"mixedbreadai",children:"MixedbreadAI"}),"\n",(0,a.jsx)(n.p,{children:"Welcome to the mixedbread ai reranker guide! This guide will help you use mixedbread ai's API to rerank search query results, ensuring you get the most relevant information, just like picking the freshest bread from the bakery."}),"\n",(0,a.jsxs)(n.p,{children:["To find out more about the latest features and updates, visit the ",(0,a.jsx)(n.a,{href:"https://mixedbread.ai/",children:"mixedbread.ai"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#setup",children:"Setup"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#integration-with-llamaflowjs",children:"Usage with llamaflowjs"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#simple-reranking-guide",children:"Simple Reranking Guide"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"#reranking-with-objects",children:"Reranking with Objects"})}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"setup",children:"Setup"}),"\n",(0,a.jsxs)(n.p,{children:["First, you will need to install the ",(0,a.jsx)(n.code,{children:"llamaflowjs"})," package."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"pnpm install llamaflowjs\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Next, sign up for an API key at ",(0,a.jsx)(n.a,{href:"https://mixedbread.ai/",children:"mixedbread.ai"}),". Once you have your API key, you can import the necessary modules and create a new instance of the ",(0,a.jsx)(n.code,{children:"MixedbreadAIReranker"})," class."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'import {\n  MixedbreadAIReranker,\n  Document,\n  OpenAI,\n  VectorStoreIndex,\n  Settings,\n} from "llamaflowjs";\n'})}),"\n",(0,a.jsx)(n.h2,{id:"usage-with-llamaflowjs",children:"Usage with llamaflowjs"}),"\n",(0,a.jsx)(n.p,{children:"This section will guide you through integrating mixedbread's reranker with llamaflowjs."}),"\n",(0,a.jsx)(n.h3,{id:"step-1-load-and-index-documents",children:"Step 1: Load and Index Documents"}),"\n",(0,a.jsx)(n.p,{children:"For this example, we will use a single document. In a real-world scenario, you would have multiple documents to index, like a variety of breads in a bakery."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'const document = new Document({\n  text: "This is a sample document.",\n  id_: "sampleDoc",\n});\n\nSettings.llm = new OpenAI({ model: "gpt-3.5-turbo", temperature: 0.1 });\n\nconst index = await VectorStoreIndex.fromDocuments([document]);\n'})}),"\n",(0,a.jsx)(n.h3,{id:"step-2-increase-similarity-topk",children:"Step 2: Increase Similarity TopK"}),"\n",(0,a.jsxs)(n.p,{children:["The default value for ",(0,a.jsx)(n.code,{children:"similarityTopK"})," is 2, which means only the most similar document will be returned. To get more results, like picking a variety of fresh breads, you can increase the value of ",(0,a.jsx)(n.code,{children:"similarityTopK"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"const retriever = index.asRetriever();\nretriever.similarityTopK = 5;\n"})}),"\n",(0,a.jsx)(n.h3,{id:"step-3-create-a-mixedbreadaireranker-instance",children:"Step 3: Create a MixedbreadAIReranker Instance"}),"\n",(0,a.jsxs)(n.p,{children:["Create a new instance of the ",(0,a.jsx)(n.code,{children:"MixedbreadAIReranker"})," class."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'const nodePostprocessor = new MixedbreadAIReranker({\n  apiKey: "<MIXEDBREAD_API_KEY>",\n  topN: 4,\n});\n'})}),"\n",(0,a.jsx)(n.h3,{id:"step-4-create-a-query-engine",children:"Step 4: Create a Query Engine"}),"\n",(0,a.jsx)(n.p,{children:"Combine the retriever and node postprocessor to create a query engine. This setup ensures that your queries are processed and reranked to provide the best results, like arranging the bread in the order of freshness and quality."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'const queryEngine = index.asQueryEngine({\n  retriever,\n  nodePostprocessors: [nodePostprocessor],\n});\n\n// Log the response\nconst response = await queryEngine.query("Where did the author grow up?");\nconsole.log(response);\n'})}),"\n",(0,a.jsx)(n.p,{children:"With mixedbread's Reranker, you're all set to serve up the most relevant and well-ordered results, just like a skilled baker arranging their best breads for eager customers. Enjoy the perfect blend of technology and culinary delight!"}),"\n",(0,a.jsx)(n.h2,{id:"simple-reranking-guide",children:"Simple Reranking Guide"}),"\n",(0,a.jsx)(n.p,{children:"This section will guide you through a simple reranking process using mixedbread ai."}),"\n",(0,a.jsx)(n.h3,{id:"step-1-create-an-instance-of-mixedbreadaireranker",children:"Step 1: Create an Instance of MixedbreadAIReranker"}),"\n",(0,a.jsxs)(n.p,{children:["Create a new instance of the ",(0,a.jsx)(n.code,{children:"MixedbreadAIReranker"})," class, passing in your API key and the number of results you want to return. It's like setting up your bakery to offer a specific number of freshly baked items."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'const reranker = new MixedbreadAIReranker({\n  apiKey: "<MIXEDBREAD_API_KEY>",\n  topN: 4,\n});\n'})}),"\n",(0,a.jsx)(n.h3,{id:"step-2-define-nodes-and-query",children:"Step 2: Define Nodes and Query"}),"\n",(0,a.jsx)(n.p,{children:"Define the nodes (documents) you want to rerank and the query."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'const nodes = [\n  { node: new BaseNode("To bake bread you need flour") },\n  { node: new BaseNode("To bake bread you need yeast") },\n];\nconst query = "What do you need to bake bread?";\n'})}),"\n",(0,a.jsx)(n.h3,{id:"step-3-perform-reranking",children:"Step 3: Perform Reranking"}),"\n",(0,a.jsxs)(n.p,{children:["Use the ",(0,a.jsx)(n.code,{children:"postprocessNodes"})," method to rerank the nodes based on the query."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"const result = await reranker.postprocessNodes(nodes, query);\nconsole.log(result); // Like pulling freshly baked nodes out of the oven.\n"})}),"\n",(0,a.jsx)(n.h2,{id:"reranking-with-objects",children:"Reranking with Objects"}),"\n",(0,a.jsx)(n.p,{children:"This section will guide you through reranking when working with objects."}),"\n",(0,a.jsx)(n.h3,{id:"step-1-create-an-instance-of-mixedbreadaireranker-1",children:"Step 1: Create an Instance of MixedbreadAIReranker"}),"\n",(0,a.jsxs)(n.p,{children:["Create a new instance of the ",(0,a.jsx)(n.code,{children:"MixedbreadAIReranker"})," class, just like before."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'const reranker = new MixedbreadAIReranker({\n  apiKey: "<MIXEDBREAD_API_KEY>",\n  model: "mixedbread-ai/mxbai-rerank-large-v1",\n  topK: 5,\n  rankFields: ["title", "content"],\n  returnInput: true,\n  maxRetries: 5,\n});\n'})}),"\n",(0,a.jsx)(n.h3,{id:"step-2-define-documents-and-query",children:"Step 2: Define Documents and Query"}),"\n",(0,a.jsx)(n.p,{children:"Define the documents (objects) you want to rerank and the query."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'const documents = [\n  { title: "Bread Recipe", content: "To bake bread you need flour" },\n  { title: "Bread Recipe", content: "To bake bread you need yeast" },\n];\nconst query = "What do you need to bake bread?";\n'})}),"\n",(0,a.jsx)(n.h3,{id:"step-3-perform-reranking-1",children:"Step 3: Perform Reranking"}),"\n",(0,a.jsxs)(n.p,{children:["Use the ",(0,a.jsx)(n.code,{children:"rerank"})," method to reorder the documents based on the query."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"const result = await reranker.rerank(documents, query);\nconsole.log(result); // Perfectly customized results, ready to serve.\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},43327:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>d});var a=r(22155);const s={},t=a.createContext(s);function i(e){const n=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);