"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1121],{12419:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var s=t(65723),i=t(43327);const r={},o="QueryEngine",a={id:"modules/query_engines/index",title:"QueryEngine",description:"A query engine wraps a Retriever and a ResponseSynthesizer into a pipeline, that will use the query string to fetech nodes and then send them to the LLM to generate a response.",source:"@site/docs/modules/query_engines/index.md",sourceDirName:"modules/query_engines",slug:"/modules/query_engines/",permalink:"/modules/query_engines/",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"Transformations",permalink:"/modules/ingestion_pipeline/transformations"},next:{title:"Metadata Filtering",permalink:"/modules/query_engines/metadata_filtering"}},u={},l=[{value:"Sub Question Query Engine",id:"sub-question-query-engine",level:2},{value:"Getting Started",id:"getting-started",level:3},{value:"Tools",id:"tools",level:3},{value:"API Reference",id:"api-reference",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"queryengine",children:"QueryEngine"}),"\n",(0,s.jsxs)(n.p,{children:["A query engine wraps a ",(0,s.jsx)(n.code,{children:"Retriever"})," and a ",(0,s.jsx)(n.code,{children:"ResponseSynthesizer"})," into a pipeline, that will use the query string to fetech nodes and then send them to the LLM to generate a response."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'const queryEngine = index.asQueryEngine();\nconst response = await queryEngine.query({ query: "query string" });\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"query"})," function also supports streaming, just add ",(0,s.jsx)(n.code,{children:"stream: true"})," as an option:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'const stream = await queryEngine.query({ query: "query string", stream: true });\nfor await (const chunk of stream) {\n  process.stdout.write(chunk.response);\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"sub-question-query-engine",children:"Sub Question Query Engine"}),"\n",(0,s.jsx)(n.p,{children:'The basic concept of the Sub Question Query Engine is that it splits a single query into multiple queries, gets an answer for each of those queries, and then combines those different answers into a single coherent response for the user. You can think of it as the "think this through step by step" prompt technique but iterating over your data sources!'}),"\n",(0,s.jsx)(n.h3,{id:"getting-started",children:"Getting Started"}),"\n",(0,s.jsxs)(n.p,{children:["The easiest way to start trying the Sub Question Query Engine is running the subquestion.ts file in ",(0,s.jsx)(n.a,{href:"https://github.com/LlamaFlowJs/LlamaFlowJs/blob/main/examples/subquestion.ts",children:"examples"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npx ts-node subquestion.ts\n"})}),"\n",(0,s.jsx)(n.h3,{id:"tools",children:"Tools"}),"\n",(0,s.jsx)(n.p,{children:"SubQuestionQueryEngine is implemented with Tools. The basic idea of Tools is that they are executable options for the large language model. In this case, our SubQuestionQueryEngine relies on QueryEngineTool, which as you guessed it is a tool to run queries on a QueryEngine. This allows us to give the model an option to query different documents for different questions for example. You could also imagine that the SubQuestionQueryEngine could use a Tool that searches for something on the web or gets an answer using Wolfram Alpha."}),"\n",(0,s.jsxs)(n.p,{children:["You can learn more about Tools by taking a look at the llamaflowjs Python documentation ",(0,s.jsx)(n.a,{href:"https://gpt-index.readthedocs.io/en/latest/core_modules/agent_modules/tools/root.html",children:"https://gpt-index.readthedocs.io/en/latest/core_modules/agent_modules/tools/root.html"})]}),"\n",(0,s.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/api/classes/RetrieverQueryEngine",children:"RetrieverQueryEngine"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/api/classes/SubQuestionQueryEngine",children:"SubQuestionQueryEngine"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/api/classes/QueryEngineTool",children:"QueryEngineTool"})}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},43327:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var s=t(22155);const i={},r=s.createContext(i);function o(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);